"use strict";(self.webpackChunkts_movies=self.webpackChunkts_movies||[]).push([[178],{4178:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(4165),s=n(3433),a=n(5861),u=n(9439),c=n(2791),i=n(1087),o=n(8078),l=n(5493),f=n(6222),h=n(8174),p="Movies_section__bjPDA",g="Movies_form-wrapper__YIIZB",d=n(3329),v=function(){var e=(0,c.useState)([]),t=(0,u.Z)(e,2),n=t[0],v=t[1],m=(0,c.useState)(!1),x=(0,u.Z)(m,2),y=x[0],S=x[1],Z=(0,c.useState)(null),_=(0,u.Z)(Z,2),w=_[0],b=_[1],j=(0,c.useState)(1),k=(0,u.Z)(j,2),U=k[0],q=k[1],M=(0,c.useState)(0),N=(0,u.Z)(M,2),P=N[0],A=N[1],B=(0,c.useState)(0),C=(0,u.Z)(B,2),E=C[0],I=C[1],F=(0,o.k3)().lang,G=(0,c.useRef)(!1),L=(0,i.lr)(),O=(0,u.Z)(L,2),Q=O[0],T=O[1],W=Q.get("query");(0,c.useEffect)((function(){var e,t;if(W){!1===G.current?function(){(e=e||(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,b(null),S(!0),t=[],n=0;case 5:if(!(n<U)){e.next=19;break}return e.next=8,l.G.getMoviesByQuery({query:W,language:F,page:n+1});case 8:if((a=e.sent)&&0!==a.results.length){e.next=13;break}return b("en-US"===F?"Movies with this query weren't found. Please enter valid query and try again!":"\u0424\u0456\u043b\u044c\u043c\u0456\u0432 \u0437\u0430 \u0434\u0430\u043d\u0438\u043c \u0437\u0430\u043f\u0438\u0442\u043e\u043c \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e. \u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 \u0437\u0430\u043f\u0438\u0442 \u0442\u0430 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u043d\u043e\u0432\u0443!"),e.abrupt("return");case 13:P!==a.total_pages&&A(a.total_pages),E!==a.total_results&&(u="en-US"===F?"Number of successful search results: ".concat(a.total_results,"!"):"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0443\u0441\u043f\u0456\u0448\u043d\u0438\u0445 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0456\u0432 \u043f\u043e\u0448\u0443\u043a\u0443: ".concat(a.total_results,"!"),h.Am.success(u),I(a.total_results)),t.push.apply(t,(0,s.Z)(a.results));case 16:n+=1,e.next=5;break;case 19:v((function(e){return 0===e.length?t:t.map((function(e){return e.id})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){var n=t.find((function(t){return t.id===e}));return n||t[0]}))})),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0),b("en-US"===F?"Something went wrong. Please try again later!":"\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c \u0441\u043f\u0440\u043e\u0431\u0443 \u043f\u0456\u0437\u043d\u0456\u0448\u0435!");case 27:return e.prev=27,S(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,22,27,30]])})))).apply(this,arguments)}():function(){(t=t||(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,u,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(null),S(!0),e.next=5,l.G.getMoviesByQuery({query:W,language:F,page:U});case 5:if((t=e.sent)&&0!==t.results.length){e.next=8;break}throw new Error("There is no fetched data.");case 8:n=t.results,a=t.total_pages,u=t.total_results,v((function(e){var t=n.filter((function(t){return-1===e.map((function(e){return e.id})).indexOf(t.id)}));return[].concat((0,s.Z)(e),(0,s.Z)(t))})),P!==a&&A(a),E!==u&&(c="en-US"===F?"Number of successful search results: ".concat(u,"!"):"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0443\u0441\u043f\u0456\u0448\u043d\u0438\u0445 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0456\u0432 \u043f\u043e\u0448\u0443\u043a\u0443: ".concat(u,"!"),h.Am.success(c),I(u)),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),b("en-US"===F?"Something went wrong. Please try again later!":"\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c \u0441\u043f\u0440\u043e\u0431\u0443 \u043f\u0456\u0437\u043d\u0456\u0448\u0435!");case 19:return e.prev=19,S(!1),G.current=!1,e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,14,19,23]])})))).apply(this,arguments)}()}}),[F,U,W,P,E]);var D="en-US"===F?"There are no movies yet. Enter your query to find some...":"\u041d\u0430\u0440\u0430\u0437\u0456 \u0444\u0456\u043b\u044c\u043c\u0438 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456. \u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0412\u0430\u0448 \u0437\u0430\u043f\u0438\u0442 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443...";return(0,d.jsx)("section",{className:p,children:(0,d.jsxs)(f.W2,{children:[(0,d.jsx)("h1",{className:"visually-hidden",children:"en-US"===F?"Search movies":"\u041f\u043e\u0448\u0443\u043a \u0444\u0456\u043b\u044c\u043c\u0456\u0432"}),(0,d.jsx)("div",{className:g,children:(0,d.jsx)(f.UI,{onSubmit:function(e){v([]),q(1),A(0),I(0),b(null),T({query:e})}})}),y&&(0,d.jsx)(f.$j,{}),w&&(0,d.jsx)(f.d2,{type:"error",message:w}),!w&&0===n.length&&(0,d.jsx)(f.d2,{type:"init",message:D}),!w&&n.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.eW,{movies:n}),U!==P&&(0,d.jsx)(f.CF,{onLoadMore:function(){G.current=!0,q((function(e){return e+1}))},isLoading:y})]})]})})}}}]);
//# sourceMappingURL=178.02b46225.chunk.js.map