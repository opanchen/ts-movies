"use strict";(self.webpackChunkts_movies=self.webpackChunkts_movies||[]).push([[178],{4178:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(4165),s=n(3433),a=n(5861),u=n(9439),o=n(2791),c=n(1087),i=n(8078),l=n(5493),f=n(6267),h=n(8174),p="Movies_section__bjPDA",g="Movies_form-wrapper__YIIZB",d=n(3329),v=function(){var e=(0,o.useState)([]),t=(0,u.Z)(e,2),n=t[0],v=t[1],m=(0,o.useState)(!1),x=(0,u.Z)(m,2),y=x[0],w=x[1],S=(0,o.useState)(null),Z=(0,u.Z)(S,2),_=Z[0],b=Z[1],j=(0,o.useState)(1),k=(0,u.Z)(j,2),q=k[0],U=k[1],M=(0,o.useState)(0),N=(0,u.Z)(M,2),E=N[0],P=N[1],T=(0,o.useState)(0),A=(0,u.Z)(T,2),B=A[0],C=A[1],I=(0,i.k3)().lang,O=(0,o.useRef)(!1),F=(0,c.lr)(),G=(0,u.Z)(F,2),L=G[0],Q=G[1],W=L.get("query");(0,o.useEffect)((function(){var e,t;if(!W)throw new Error("Oooooops! There is no query. Test error.");!1===O.current?function(){(e=e||(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,b(null),w(!0),t=[],n=0;case 5:if(!(n<q)){e.next=19;break}return e.next=8,l.G.getMoviesByQuery({query:W,language:I,page:n+1});case 8:if((a=e.sent)&&0!==a.results.length){e.next=13;break}return b("en-US"===I?"Movies with this query weren't found. Please enter valid query and try again!":"\u0424\u0456\u043b\u044c\u043c\u0456\u0432 \u0437\u0430 \u0434\u0430\u043d\u0438\u043c \u0437\u0430\u043f\u0438\u0442\u043e\u043c \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e. \u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 \u0437\u0430\u043f\u0438\u0442 \u0442\u0430 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u043d\u043e\u0432\u0443!"),e.abrupt("return");case 13:E!==a.total_pages&&P(a.total_pages),B!==a.total_results&&(u="en-US"===I?"Number of successful search results: ".concat(a.total_results,"!"):"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0443\u0441\u043f\u0456\u0448\u043d\u0438\u0445 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0456\u0432 \u043f\u043e\u0448\u0443\u043a\u0443: ".concat(a.total_results,"!"),h.Am.success(u),C(a.total_results)),t.push.apply(t,(0,s.Z)(a.results));case 16:n+=1,e.next=5;break;case 19:v((function(e){return 0===e.length?t:t.map((function(e){return e.id})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){var n=t.find((function(t){return t.id===e}));return n||t[0]}))})),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0),b("en-US"===I?"Something went wrong. Please try again later!":"\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c \u0441\u043f\u0440\u043e\u0431\u0443 \u043f\u0456\u0437\u043d\u0456\u0448\u0435!");case 27:return e.prev=27,w(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,22,27,30]])})))).apply(this,arguments)}():function(){(t=t||(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,u,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(null),w(!0),e.next=5,l.G.getMoviesByQuery({query:W,language:I,page:q});case 5:if((t=e.sent)&&0!==t.results.length){e.next=8;break}throw new Error("There is no fetched data.");case 8:n=t.results,a=t.total_pages,u=t.total_results,v((function(e){var t=n.filter((function(t){return-1===e.map((function(e){return e.id})).indexOf(t.id)}));return[].concat((0,s.Z)(e),(0,s.Z)(t))})),E!==a&&P(a),B!==u&&(o="en-US"===I?"Number of successful search results: ".concat(u,"!"):"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0443\u0441\u043f\u0456\u0448\u043d\u0438\u0445 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0456\u0432 \u043f\u043e\u0448\u0443\u043a\u0443: ".concat(u,"!"),h.Am.success(o),C(u)),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),b("en-US"===I?"Something went wrong. Please try again later!":"\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a... \u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c \u0441\u043f\u0440\u043e\u0431\u0443 \u043f\u0456\u0437\u043d\u0456\u0448\u0435!");case 19:return e.prev=19,w(!1),O.current=!1,e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,14,19,23]])})))).apply(this,arguments)}()}),[I,q,W,E,B]);var D="en-US"===I?"There are no movies yet. Enter your query to find some...":"\u041d\u0430\u0440\u0430\u0437\u0456 \u0444\u0456\u043b\u044c\u043c\u0438 \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456. \u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0412\u0430\u0448 \u0437\u0430\u043f\u0438\u0442 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443...";return(0,d.jsx)("section",{className:p,children:(0,d.jsxs)(f.W2,{children:[(0,d.jsx)("h1",{className:"visually-hidden",children:"en-US"===I?"Search movies":"\u041f\u043e\u0448\u0443\u043a \u0444\u0456\u043b\u044c\u043c\u0456\u0432"}),(0,d.jsx)("div",{className:g,children:(0,d.jsx)(f.UI,{onSubmit:function(e){v([]),U(1),P(0),C(0),b(null),Q({query:e})}})}),y&&(0,d.jsx)(f.$j,{}),_&&(0,d.jsx)(f.d2,{type:"error",message:_}),!_&&0===n.length&&(0,d.jsx)(f.d2,{type:"init",message:D}),!_&&n.length>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.eW,{movies:n}),q!==E&&(0,d.jsx)(f.CF,{onLoadMore:function(){O.current=!0,U((function(e){return e+1}))},isLoading:y})]})]})})}}}]);
//# sourceMappingURL=178.b61e1567.chunk.js.map