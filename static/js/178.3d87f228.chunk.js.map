{"version":3,"file":"static/js/178.3d87f228.chunk.js","mappings":"4OACA,EAA0B,wBAA1B,EAAiE,6B,UC0GjE,EA7EyB,WACvB,IAAAA,GAA4BC,EAAAA,EAAAA,UAAsB,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA9CI,EAAMF,EAAA,GAAEG,EAASH,EAAA,GACxBI,GAAkCL,EAAAA,EAAAA,WAAkB,GAAMM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAnDE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,GAA0BT,EAAAA,EAAAA,UAAwB,MAAKU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAAhDE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GACdG,GAASC,EAAAA,EAAAA,MAATD,KAERE,GAAwCC,EAAAA,EAAAA,MAAiBC,GAAAf,EAAAA,EAAAA,GAAAa,EAAA,GAAlDG,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GAC9BG,EAAQF,EAAaG,IAAI,UAO/BC,EAAAA,EAAAA,YAAU,WAAO,IAADC,EACd,GAAKH,EAAL,EAEgB,YAAAG,EAAAA,IAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,IAAA,IAAAC,EAAA,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACE,OAAnBxB,GAAa,GAAMsB,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGEC,EAAAA,EAAUC,iBAAiB,CAC5Cd,MAAAA,EACAe,SAAUtB,IACT,KAAD,EAHQ,IAAJe,EAAIE,EAAAM,OAM2B,IAAxBR,EAAKS,QAAQC,OAAY,CAAAR,EAAAE,KAAA,QAKb,OAAvBpB,EAHW,UAATC,EACI,gFACA,4dACiBiB,EAAAS,OAAA,iBAIzBnC,EAAUwB,EAAKS,SAASP,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAU,GAAAV,EAAA,SAExBW,QAAQC,IAAGZ,EAAAU,IAKX5B,EAHW,UAATC,EACI,gDACA,+RACiB,QAEH,OAFGiB,EAAAC,KAAA,GAEvBvB,GAAa,GAAOsB,EAAAa,OAAA,6BAAAb,EAAAc,OAAA,GAAAjB,EAAA,0BAEvBkB,MAAA,KAAAC,UAAA,CAEDC,EAlCkB,CAmCpB,GAAG,CAAClC,EAAMO,IAEV,IAAM4B,EACK,UAATnC,EACI,4DACA,sRAEN,OACEoC,EAAAA,EAAAA,KAAA,WAASC,UAAWC,EAAYC,UAC9BC,EAAAA,EAAAA,MAACC,EAAAA,GAAS,CAAAF,SAAA,EACRH,EAAAA,EAAAA,KAAA,MAAIC,UAAU,kBAAiBE,SACnB,UAATvC,EAAmB,gBAAkB,+EAExCoC,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAoBC,UAClCH,EAAAA,EAAAA,KAACM,EAAAA,GAAU,CAACC,SAvDO,SAACpC,GAC1BR,EAAS,MACTO,EAAgB,CAAEC,MAAAA,GACpB,MAsDOb,IAAa0C,EAAAA,EAAAA,KAACQ,EAAAA,GAAO,IACrB9C,IAASsC,EAAAA,EAAAA,KAACS,EAAAA,GAAY,CAACC,KAAK,QAAQC,QAASjD,KAC5CA,GAA2B,IAAlBR,EAAOmC,SAChBW,EAAAA,EAAAA,KAACS,EAAAA,GAAY,CAACC,KAAK,OAAOC,QAASZ,KAEnCrC,GAA2B,IAAlBR,EAAOmC,SAAgBW,EAAAA,EAAAA,KAACY,EAAAA,GAAS,CAAC1D,OAAQA,QAI7D,C","sources":["webpack://ts-movies/./src/pages/Movies/Movies.module.css?82ee","pages/Movies/Movies.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"section\":\"Movies_section__bjPDA\",\"form-wrapper\":\"Movies_form-wrapper__YIIZB\"};","import { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { useLangState } from \"src/hooks\";\nimport { moviesAPI } from \"src/services/moviesAPI\";\nimport {\n  Container,\n  FallbackView,\n  MovieList,\n  SearchForm,\n  Spinner,\n} from \"src/components\";\nimport css from \"./Movies.module.css\";\n\ntype MovieType = {\n  title: string;\n  original_title: string;\n  overview: string;\n  backdrop_path: string;\n  poster_path: string;\n  release_date: string;\n  id: number;\n  media_type: string;\n  original_language: string;\n  popularity: number;\n  vote_average: number;\n  vote_count: number;\n  genre_ids: number[];\n  [key: string]: unknown;\n};\n\nconst Movies: React.FC = () => {\n  const [movies, setMovies] = useState<MovieType[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const { lang } = useLangState();\n\n  const [searchParams, setSearchParams] = useSearchParams();\n  const query = searchParams.get(\"query\");\n\n  const onSearchFormSubmit = (query: string) => {\n    setError(null);\n    setSearchParams({ query });\n  };\n\n  useEffect(() => {\n    if (!query) return;\n\n    const loadMovies = async () => {\n      setIsLoading(true);\n\n      try {\n        const data = await moviesAPI.getMoviesByQuery({\n          query,\n          language: lang,\n        });\n        // console.log(data);\n\n        if (!data || data.results.length === 0) {\n          const errorMessage =\n            lang === \"en-US\"\n              ? \"Movies with this query weren't found. Please enter valid query and try again!\"\n              : \"Фільмів за даним запитом не знайдено. Будь ласка, введіть валідний запит та спробуйте знову!\";\n          setError(errorMessage);\n          return;\n        }\n\n        setMovies(data.results);\n      } catch (error) {\n        console.log(error);\n        const errorMessage =\n          lang === \"en-US\"\n            ? \"Something went wrong. Please try again later!\"\n            : \"Щось пішло не так... Будь ласка, повторіть спробу пізніше!\";\n        setError(errorMessage);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadMovies();\n  }, [lang, query]);\n\n  const defaultFallbackMessage: string =\n    lang === \"en-US\"\n      ? \"There are no movies yet. Enter your query to find some...\"\n      : \"Наразі фільми відсутні. Введіть Ваш запит для пошуку...\";\n\n  return (\n    <section className={css.section}>\n      <Container>\n        <h1 className=\"visually-hidden\">\n          {lang === \"en-US\" ? \"Search movies\" : \"Пошук фільмів\"}\n        </h1>\n        <div className={css[\"form-wrapper\"]}>\n          <SearchForm onSubmit={onSearchFormSubmit} />\n        </div>\n        {isLoading && <Spinner />}\n        {error && <FallbackView type=\"error\" message={error} />}\n        {!error && movies.length === 0 && (\n          <FallbackView type=\"init\" message={defaultFallbackMessage} />\n        )}\n        {!error && movies.length !== 0 && <MovieList movies={movies} />}\n      </Container>\n    </section>\n  );\n};\n\nexport default Movies;\n"],"names":["_useState","useState","_useState2","_slicedToArray","movies","setMovies","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","error","setError","lang","useLangState","_useSearchParams","useSearchParams","_useSearchParams2","searchParams","setSearchParams","query","get","useEffect","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_context","prev","next","moviesAPI","getMoviesByQuery","language","sent","results","length","abrupt","t0","console","log","finish","stop","apply","arguments","loadMovies","defaultFallbackMessage","_jsx","className","css","children","_jsxs","Container","SearchForm","onSubmit","Spinner","FallbackView","type","message","MovieList"],"sourceRoot":""}